#!/bin/bash

echo "Syncing"

# xmonad.hs
if [ ! -d $HOME/.xmonad ]; then
    mkdir $HOME/.xmonad
else
    if [ -f $HOME/.xmonad/xmonad.hs ]; then
        if [ ! -d $HOME/old-dotfiles ]; then
            mkdir $HOME/old-dotfiles
        fi
        mv $HOME/.xmonad/xmonad.hs $HOME/old-dotfiles
    fi
fi
ln -s $HOME/dotfiles/xmonad.hs $HOME/.xmonad/xmonad.hs

# dotfiles
dotfiles="Xresources xsessionrc bashrc tmux.conf vimrc"
for f in $dotfiles; do
    if [ -f $HOME/.$f ]; then
        if [ ! -d $HOME/old-dotfiles ]; then
            mkdir $HOME/old-dotfiles
        fi
        mv $HOME/.$f $HOME/old-dotfiles
    fi
    ln -s $HOME/dotfiles/$f $HOME/.$f
done

# gitconfig
echo "Sync gitconfig?"
select yn in "Yes" "No"; do
    case $yn in
	Yes )
        if [ -f $HOME/.gitconfig ]; then
            if [ ! -d $HOME/old-dotfiles ]; then
                mkdir $HOME/old-dotfiles
            fi
            mv $HOME/.gitconfig $HOME/old-dotfiles
        fi
        ln -s $HOME/dotfiles/gitconfig $HOME/.gitconfig
        echo "Synced gitconfig"
        break;;
    No )
        echo "Didn't sync gitconfig"
        exit;;
    esac
done

echo "Done"
