#!/bin/bash

echo "Starting initial sync"
dotfiles="tmux.conf vimrc"
for f in $dotfiles; do
    if [ -f $HOME/.$f ]; then
        if [ ! -d $HOME/old-dotfiles ]; then
            mkdir $HOME/old-dotfiles
        fi
        mv $HOME/.$f $HOME/old-dotfiles
    fi
    ln -s $HOME/dotfiles/$f $HOME/.$f
done
echo "Finished initial sync"
echo "Sync gitconfig?"
select yn in "Yes" "No"; do
    case $yn in
	Yes )
        if [ -f $HOME/.gitconfig ]; then
            if [ ! -d $HOME/old-dotfiles ]; then
                mkdir $HOME/old-dotfiles
            fi
            mv $HOME/.gitconfig $HOME/old-dotfiles
        fi
        ln -s $HOME/dotfiles/gitconfig $HOME/.gitconfig
        echo "Synced gitconfig"
        break;;
    No )
        echo "Didn't sync gitconfig"
        exit;;
    esac
done
